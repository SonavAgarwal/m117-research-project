{
    "sha": "6808b11cd6d97c71a2eed754ed4f955acd789086",
    "node_id": "MDY6Q29tbWl0ODE5OTA3OjY4MDhiMTFjZDZkOTdjNzFhMmVlZDc1NGVkNGY5NTVhY2Q3ODkwODY=",
    "commit": {
        "author": {
            "name": "Jozef Hartinger",
            "email": "jharting@redhat.com",
            "date": "2014-12-01T16:48:56Z"
        },
        "committer": {
            "name": "Jozef Hartinger",
            "email": "jharting@redhat.com",
            "date": "2014-12-04T10:17:00Z"
        },
        "message": "WELD-1802 RequestScopedCache - Make sure each request is ended before a new one is started",
        "tree": {
            "sha": "f069cb50e9675a91e0a23e1eb5b2aef30b9bad3d",
            "url": "https://api.github.com/repos/weld/core/git/trees/f069cb50e9675a91e0a23e1eb5b2aef30b9bad3d"
        },
        "url": "https://api.github.com/repos/weld/core/git/commits/6808b11cd6d97c71a2eed754ed4f955acd789086",
        "comment_count": 0,
        "verification": {
            "verified": false,
            "reason": "unsigned",
            "signature": null,
            "payload": null,
            "verified_at": null
        }
    },
    "url": "https://api.github.com/repos/weld/core/commits/6808b11cd6d97c71a2eed754ed4f955acd789086",
    "html_url": "https://github.com/weld/core/commit/6808b11cd6d97c71a2eed754ed4f955acd789086",
    "comments_url": "https://api.github.com/repos/weld/core/commits/6808b11cd6d97c71a2eed754ed4f955acd789086/comments",
    "author": {
        "login": "jharting",
        "id": 167352,
        "node_id": "MDQ6VXNlcjE2NzM1Mg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/167352?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jharting",
        "html_url": "https://github.com/jharting",
        "followers_url": "https://api.github.com/users/jharting/followers",
        "following_url": "https://api.github.com/users/jharting/following{/other_user}",
        "gists_url": "https://api.github.com/users/jharting/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jharting/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jharting/subscriptions",
        "organizations_url": "https://api.github.com/users/jharting/orgs",
        "repos_url": "https://api.github.com/users/jharting/repos",
        "events_url": "https://api.github.com/users/jharting/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jharting/received_events",
        "type": "User",
        "user_view_type": "public",
        "site_admin": false
    },
    "committer": {
        "login": "jharting",
        "id": 167352,
        "node_id": "MDQ6VXNlcjE2NzM1Mg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/167352?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jharting",
        "html_url": "https://github.com/jharting",
        "followers_url": "https://api.github.com/users/jharting/followers",
        "following_url": "https://api.github.com/users/jharting/following{/other_user}",
        "gists_url": "https://api.github.com/users/jharting/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jharting/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jharting/subscriptions",
        "organizations_url": "https://api.github.com/users/jharting/orgs",
        "repos_url": "https://api.github.com/users/jharting/repos",
        "events_url": "https://api.github.com/users/jharting/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jharting/received_events",
        "type": "User",
        "user_view_type": "public",
        "site_admin": false
    },
    "parents": [
        {
            "sha": "29fd1107fd30579ad9bb23fae4dc3ba464205745",
            "url": "https://api.github.com/repos/weld/core/commits/29fd1107fd30579ad9bb23fae4dc3ba464205745",
            "html_url": "https://github.com/weld/core/commit/29fd1107fd30579ad9bb23fae4dc3ba464205745"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 3,
        "deletions": 1
    },
    "files": [
        {
            "sha": "3eae118ab305772d93ec86d0ca8081a6f942d04d",
            "filename": "impl/src/main/java/org/jboss/weld/context/cache/RequestScopedCache.java",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/weld/core/blob/6808b11cd6d97c71a2eed754ed4f955acd789086/impl%2Fsrc%2Fmain%2Fjava%2Forg%2Fjboss%2Fweld%2Fcontext%2Fcache%2FRequestScopedCache.java",
            "raw_url": "https://github.com/weld/core/raw/6808b11cd6d97c71a2eed754ed4f955acd789086/impl%2Fsrc%2Fmain%2Fjava%2Forg%2Fjboss%2Fweld%2Fcontext%2Fcache%2FRequestScopedCache.java",
            "contents_url": "https://api.github.com/repos/weld/core/contents/impl%2Fsrc%2Fmain%2Fjava%2Forg%2Fjboss%2Fweld%2Fcontext%2Fcache%2FRequestScopedCache.java?ref=6808b11cd6d97c71a2eed754ed4f955acd789086",
            "patch": "@@ -71,6 +71,8 @@ public void invalidate() {\n     }\n \n     public static void beginRequest() {\n+        // if the previous request was not ended properly for some reason, make sure it is ended now\n+        endRequest();\n         CACHE.set(new LinkedList<RequestScopedItem>());\n     }\n \n@@ -80,8 +82,8 @@ public static void beginRequest() {\n      */\n     public static void endRequest() {\n         final List<RequestScopedItem> result = CACHE.get();\n-        CACHE.remove();\n         if (result != null) {\n+            CACHE.remove();\n             for (final RequestScopedItem item : result) {\n                 item.invalidate();\n             }"
        }
    ]
}