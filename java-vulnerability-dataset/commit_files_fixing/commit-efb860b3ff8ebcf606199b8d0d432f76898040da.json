{
    "sha": "efb860b3ff8ebcf606199b8d0d432f76898040da",
    "node_id": "MDY6Q29tbWl0MjQ5MzkwNDplZmI4NjBiM2ZmOGViY2Y2MDYxOTliOGQwZDQzMmY3Njg5ODA0MGRh",
    "commit": {
        "author": {
            "name": "Mark Thomas",
            "email": "markt@apache.org",
            "date": "2018-09-04T18:19:32Z"
        },
        "committer": {
            "name": "Mark Thomas",
            "email": "markt@apache.org",
            "date": "2018-09-04T18:19:32Z"
        },
        "message": "When generating a redirect to a directory in the Default Servlet, avoid generating a protocol relative redirect.\n\ngit-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1840055 13f79535-47bb-0310-9956-ffa450edef68",
        "tree": {
            "sha": "f5dfa3c861d399e181bcdb2356c08cf9247ad867",
            "url": "https://api.github.com/repos/apache/tomcat/git/trees/f5dfa3c861d399e181bcdb2356c08cf9247ad867"
        },
        "url": "https://api.github.com/repos/apache/tomcat/git/commits/efb860b3ff8ebcf606199b8d0d432f76898040da",
        "comment_count": 0,
        "verification": {
            "verified": false,
            "reason": "unsigned",
            "signature": null,
            "payload": null,
            "verified_at": null
        }
    },
    "url": "https://api.github.com/repos/apache/tomcat/commits/efb860b3ff8ebcf606199b8d0d432f76898040da",
    "html_url": "https://github.com/apache/tomcat/commit/efb860b3ff8ebcf606199b8d0d432f76898040da",
    "comments_url": "https://api.github.com/repos/apache/tomcat/commits/efb860b3ff8ebcf606199b8d0d432f76898040da/comments",
    "author": {
        "login": "markt-asf",
        "id": 4690029,
        "node_id": "MDQ6VXNlcjQ2OTAwMjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4690029?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/markt-asf",
        "html_url": "https://github.com/markt-asf",
        "followers_url": "https://api.github.com/users/markt-asf/followers",
        "following_url": "https://api.github.com/users/markt-asf/following{/other_user}",
        "gists_url": "https://api.github.com/users/markt-asf/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/markt-asf/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/markt-asf/subscriptions",
        "organizations_url": "https://api.github.com/users/markt-asf/orgs",
        "repos_url": "https://api.github.com/users/markt-asf/repos",
        "events_url": "https://api.github.com/users/markt-asf/events{/privacy}",
        "received_events_url": "https://api.github.com/users/markt-asf/received_events",
        "type": "User",
        "user_view_type": "public",
        "site_admin": false
    },
    "committer": {
        "login": "markt-asf",
        "id": 4690029,
        "node_id": "MDQ6VXNlcjQ2OTAwMjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4690029?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/markt-asf",
        "html_url": "https://github.com/markt-asf",
        "followers_url": "https://api.github.com/users/markt-asf/followers",
        "following_url": "https://api.github.com/users/markt-asf/following{/other_user}",
        "gists_url": "https://api.github.com/users/markt-asf/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/markt-asf/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/markt-asf/subscriptions",
        "organizations_url": "https://api.github.com/users/markt-asf/orgs",
        "repos_url": "https://api.github.com/users/markt-asf/repos",
        "events_url": "https://api.github.com/users/markt-asf/events{/privacy}",
        "received_events_url": "https://api.github.com/users/markt-asf/received_events",
        "type": "User",
        "user_view_type": "public",
        "site_admin": false
    },
    "parents": [
        {
            "sha": "94155efccd19fc3338433c63cfa5430e2d1ae00a",
            "url": "https://api.github.com/repos/apache/tomcat/commits/94155efccd19fc3338433c63cfa5430e2d1ae00a",
            "html_url": "https://github.com/apache/tomcat/commit/94155efccd19fc3338433c63cfa5430e2d1ae00a"
        }
    ],
    "stats": {
        "total": 8,
        "additions": 8,
        "deletions": 0
    },
    "files": [
        {
            "sha": "5527d05f4b3b3bd8362c8f70e4911f605368d703",
            "filename": "java/org/apache/catalina/servlets/DefaultServlet.java",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/apache/tomcat/blob/efb860b3ff8ebcf606199b8d0d432f76898040da/java%2Forg%2Fapache%2Fcatalina%2Fservlets%2FDefaultServlet.java",
            "raw_url": "https://github.com/apache/tomcat/raw/efb860b3ff8ebcf606199b8d0d432f76898040da/java%2Forg%2Fapache%2Fcatalina%2Fservlets%2FDefaultServlet.java",
            "contents_url": "https://api.github.com/repos/apache/tomcat/contents/java%2Forg%2Fapache%2Fcatalina%2Fservlets%2FDefaultServlet.java?ref=efb860b3ff8ebcf606199b8d0d432f76898040da",
            "patch": "@@ -1313,6 +1313,10 @@ private void doDirectoryRedirect(HttpServletRequest request, HttpServletResponse\n             location.append('?');\n             location.append(request.getQueryString());\n         }\n+        // Avoid protocol relative redirects\n+        while (location.length() > 1 && location.charAt(1) == '/') {\n+            location.deleteCharAt(0);\n+        }\n         response.sendRedirect(response.encodeRedirectURL(location.toString()));\n     }\n "
        },
        {
            "sha": "f8734ab8aa6e0f44fb9f02790af206b46f439684",
            "filename": "webapps/docs/changelog.xml",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/apache/tomcat/blob/efb860b3ff8ebcf606199b8d0d432f76898040da/webapps%2Fdocs%2Fchangelog.xml",
            "raw_url": "https://github.com/apache/tomcat/raw/efb860b3ff8ebcf606199b8d0d432f76898040da/webapps%2Fdocs%2Fchangelog.xml",
            "contents_url": "https://api.github.com/repos/apache/tomcat/contents/webapps%2Fdocs%2Fchangelog.xml?ref=efb860b3ff8ebcf606199b8d0d432f76898040da",
            "patch": "@@ -72,6 +72,10 @@\n       <fix>\n         <bug>62667</bug>: Add recursion to rewrite substitution parsing. (remm)\n       </fix>\n+      <fix>\n+        When generating a redirect to a directory in the Default Servlet, avoid\n+        generating a protocol relative redirect. (markt)\n+      </fix>\n     </changelog>\n   </subsection>\n   <subsection name=\"Coyote\">"
        }
    ]
}