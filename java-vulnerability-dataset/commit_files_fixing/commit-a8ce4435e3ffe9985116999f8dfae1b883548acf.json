{
    "sha": "a8ce4435e3ffe9985116999f8dfae1b883548acf",
    "node_id": "MDY6Q29tbWl0MzI5MzU3NDU6YThjZTQ0MzVlM2ZmZTk5ODUxMTY5OTlmOGRmYWUxYjg4MzU0OGFjZg==",
    "commit": {
        "author": {
            "name": "Sergii Kabashniuk",
            "email": "skabashnyuk@users.noreply.github.com",
            "date": "2019-10-23T07:54:30Z"
        },
        "committer": {
            "name": "GitHub",
            "email": "noreply@github.com",
            "date": "2019-10-23T07:54:30Z"
        },
        "message": "Disable cors on master. Cleanup cors configuration on ws-agent (#14921) (#14952)\n\n* Disable cors on master. Cleanup cors configuration on ws-agent\r\nSigned-off-by: Sergii Kabashniuk <skabashniuk@redhat.com>",
        "tree": {
            "sha": "cd7c27b6de718080b170078ecc078fef2ea9477d",
            "url": "https://api.github.com/repos/eclipse-che/che/git/trees/cd7c27b6de718080b170078ecc078fef2ea9477d"
        },
        "url": "https://api.github.com/repos/eclipse-che/che/git/commits/a8ce4435e3ffe9985116999f8dfae1b883548acf",
        "comment_count": 0,
        "verification": {
            "verified": true,
            "reason": "valid",
            "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdsAc2CRBK7hj4Ov3rIwAAdHIIAABryujX6v4IOhbP1P4LUmY9\npddMNHb7WofvUOeXEIvx9hPDP6KxI0/6xewkAjVOZOL47Q+JixSvRsSfpBz7Upck\nfCNtuHKDFWxDiZsnSk7VvFfhDP2ODiYccGepSMl1ErSNA78TCVDD8OAuJPub/jSd\njhKfgn52/jwkwH5zMwrPvbVgclxylfWnenI9xZsK7qlnOZ/snHsKTjB37Pt5zAFn\nUaBjUgnoxMONnv3oXKaeG5zyhfaydv9Rs9qXn6eb3rlesieMoDsay9AkWDVDMsWk\nFeC5gFwVhHtES3bEQ0fHkpcpcvhZii8qle9J7shoFulw6N06L7wqjnZ+vKYmhA4=\n=L70a\n-----END PGP SIGNATURE-----\n",
            "payload": "tree cd7c27b6de718080b170078ecc078fef2ea9477d\nparent fd07eec7523196a97845b513b79d2d3aa1d6df04\nauthor Sergii Kabashniuk <skabashnyuk@users.noreply.github.com> 1571817270 +0200\ncommitter GitHub <noreply@github.com> 1571817270 +0200\n\nDisable cors on master. Cleanup cors configuration on ws-agent (#14921) (#14952)\n\n* Disable cors on master. Cleanup cors configuration on ws-agent\r\nSigned-off-by: Sergii Kabashniuk <skabashniuk@redhat.com>",
            "verified_at": "2024-01-16T19:59:59Z"
        }
    },
    "url": "https://api.github.com/repos/eclipse-che/che/commits/a8ce4435e3ffe9985116999f8dfae1b883548acf",
    "html_url": "https://github.com/eclipse-che/che/commit/a8ce4435e3ffe9985116999f8dfae1b883548acf",
    "comments_url": "https://api.github.com/repos/eclipse-che/che/commits/a8ce4435e3ffe9985116999f8dfae1b883548acf/comments",
    "author": {
        "login": "skabashnyuk",
        "id": 1614429,
        "node_id": "MDQ6VXNlcjE2MTQ0Mjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1614429?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/skabashnyuk",
        "html_url": "https://github.com/skabashnyuk",
        "followers_url": "https://api.github.com/users/skabashnyuk/followers",
        "following_url": "https://api.github.com/users/skabashnyuk/following{/other_user}",
        "gists_url": "https://api.github.com/users/skabashnyuk/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/skabashnyuk/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/skabashnyuk/subscriptions",
        "organizations_url": "https://api.github.com/users/skabashnyuk/orgs",
        "repos_url": "https://api.github.com/users/skabashnyuk/repos",
        "events_url": "https://api.github.com/users/skabashnyuk/events{/privacy}",
        "received_events_url": "https://api.github.com/users/skabashnyuk/received_events",
        "type": "User",
        "user_view_type": "public",
        "site_admin": false
    },
    "committer": {
        "login": "web-flow",
        "id": 19864447,
        "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
        "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/web-flow",
        "html_url": "https://github.com/web-flow",
        "followers_url": "https://api.github.com/users/web-flow/followers",
        "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
        "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
        "organizations_url": "https://api.github.com/users/web-flow/orgs",
        "repos_url": "https://api.github.com/users/web-flow/repos",
        "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
        "received_events_url": "https://api.github.com/users/web-flow/received_events",
        "type": "User",
        "user_view_type": "public",
        "site_admin": false
    },
    "parents": [
        {
            "sha": "fd07eec7523196a97845b513b79d2d3aa1d6df04",
            "url": "https://api.github.com/repos/eclipse-che/che/commits/fd07eec7523196a97845b513b79d2d3aa1d6df04",
            "html_url": "https://github.com/eclipse-che/che/commit/fd07eec7523196a97845b513b79d2d3aa1d6df04"
        }
    ],
    "stats": {
        "total": 153,
        "additions": 4,
        "deletions": 149
    },
    "files": [
        {
            "sha": "9daa549d444a85321251242459711aad5c0feb19",
            "filename": "assembly/assembly-wsmaster-war/src/main/java/org/eclipse/che/api/deploy/WsMasterModule.java",
            "status": "modified",
            "additions": 0,
            "deletions": 11,
            "changes": 11,
            "blob_url": "https://github.com/eclipse-che/che/blob/a8ce4435e3ffe9985116999f8dfae1b883548acf/assembly%2Fassembly-wsmaster-war%2Fsrc%2Fmain%2Fjava%2Forg%2Feclipse%2Fche%2Fapi%2Fdeploy%2FWsMasterModule.java",
            "raw_url": "https://github.com/eclipse-che/che/raw/a8ce4435e3ffe9985116999f8dfae1b883548acf/assembly%2Fassembly-wsmaster-war%2Fsrc%2Fmain%2Fjava%2Forg%2Feclipse%2Fche%2Fapi%2Fdeploy%2FWsMasterModule.java",
            "contents_url": "https://api.github.com/repos/eclipse-che/che/contents/assembly%2Fassembly-wsmaster-war%2Fsrc%2Fmain%2Fjava%2Forg%2Feclipse%2Fche%2Fapi%2Fdeploy%2FWsMasterModule.java?ref=a8ce4435e3ffe9985116999f8dfae1b883548acf",
            "patch": "@@ -60,9 +60,6 @@\n import org.eclipse.che.api.workspace.server.spi.provision.env.MachineTokenEnvVarProvider;\n import org.eclipse.che.api.workspace.server.spi.provision.env.MavenOptsEnvVariableProvider;\n import org.eclipse.che.api.workspace.server.spi.provision.env.ProjectsRootEnvVariableProvider;\n-import org.eclipse.che.api.workspace.server.spi.provision.env.WorkspaceAgentCorsAllowCredentialsEnvVarProvider;\n-import org.eclipse.che.api.workspace.server.spi.provision.env.WorkspaceAgentCorsAllowedOriginsEnvVarProvider;\n-import org.eclipse.che.api.workspace.server.spi.provision.env.WorkspaceAgentCorsEnabledEnvVarProvider;\n import org.eclipse.che.api.workspace.server.spi.provision.env.WorkspaceAgentJavaOptsEnvVariableProvider;\n import org.eclipse.che.api.workspace.server.spi.provision.env.WorkspaceIdEnvVarProvider;\n import org.eclipse.che.api.workspace.server.spi.provision.env.WorkspaceNameEnvVarProvider;\n@@ -180,14 +177,6 @@ protected void configure() {\n         .addBinding()\n         .to(WorkspaceAgentJavaOptsEnvVariableProvider.class);\n \n-    legacyEnvVarProviderMultibinders\n-        .addBinding()\n-        .to(WorkspaceAgentCorsAllowedOriginsEnvVarProvider.class);\n-    legacyEnvVarProviderMultibinders\n-        .addBinding()\n-        .to(WorkspaceAgentCorsAllowCredentialsEnvVarProvider.class);\n-    legacyEnvVarProviderMultibinders.addBinding().to(WorkspaceAgentCorsEnabledEnvVarProvider.class);\n-\n     bind(org.eclipse.che.api.workspace.server.event.WorkspaceJsonRpcMessenger.class)\n         .asEagerSingleton();\n     bind(org.eclipse.che.everrest.EverrestDownloadFileResponseFilter.class);"
        },
        {
            "sha": "0acde910ff773a3808f4f49881a585d399d900c3",
            "filename": "assembly/assembly-wsmaster-war/src/main/java/org/eclipse/che/api/deploy/WsMasterServletModule.java",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/eclipse-che/che/blob/a8ce4435e3ffe9985116999f8dfae1b883548acf/assembly%2Fassembly-wsmaster-war%2Fsrc%2Fmain%2Fjava%2Forg%2Feclipse%2Fche%2Fapi%2Fdeploy%2FWsMasterServletModule.java",
            "raw_url": "https://github.com/eclipse-che/che/raw/a8ce4435e3ffe9985116999f8dfae1b883548acf/assembly%2Fassembly-wsmaster-war%2Fsrc%2Fmain%2Fjava%2Forg%2Feclipse%2Fche%2Fapi%2Fdeploy%2FWsMasterServletModule.java",
            "contents_url": "https://api.github.com/repos/eclipse-che/che/contents/assembly%2Fassembly-wsmaster-war%2Fsrc%2Fmain%2Fjava%2Forg%2Feclipse%2Fche%2Fapi%2Fdeploy%2FWsMasterServletModule.java?ref=a8ce4435e3ffe9985116999f8dfae1b883548acf",
            "patch": "@@ -52,8 +52,8 @@ protected void configureServlets() {\n   private boolean isCheCorsEnabled() {\n     String cheCorsEnabledEnvVar = System.getenv(\"CHE_CORS_ENABLED\");\n     if (cheCorsEnabledEnvVar == null) {\n-      // by default CORS should be enabled\n-      return true;\n+      // by default CORS should be disabled\n+      return false;\n     } else {\n       return Boolean.valueOf(cheCorsEnabledEnvVar);\n     }"
        },
        {
            "sha": "a71cceb0915cbf7b8152ba2f781cf048b8ca7108",
            "filename": "assembly/assembly-wsmaster-war/src/main/webapp/WEB-INF/classes/che/che.properties",
            "status": "modified",
            "additions": 2,
            "deletions": 9,
            "changes": 11,
            "blob_url": "https://github.com/eclipse-che/che/blob/a8ce4435e3ffe9985116999f8dfae1b883548acf/assembly%2Fassembly-wsmaster-war%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fclasses%2Fche%2Fche.properties",
            "raw_url": "https://github.com/eclipse-che/che/raw/a8ce4435e3ffe9985116999f8dfae1b883548acf/assembly%2Fassembly-wsmaster-war%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fclasses%2Fche%2Fche.properties",
            "contents_url": "https://api.github.com/repos/eclipse-che/che/contents/assembly%2Fassembly-wsmaster-war%2Fsrc%2Fmain%2Fwebapp%2FWEB-INF%2Fclasses%2Fche%2Fche.properties?ref=a8ce4435e3ffe9985116999f8dfae1b883548acf",
            "patch": "@@ -685,20 +685,13 @@ che.core.jsonrpc.minor_processor_queue_capacity=10000\n che.metrics.port=8087\n \n # CORS settings\n-# CORS filter on WS Master is turned on by default.\n-# Use environment variable \"CHE_CORS_ENABLED=false\" to turn it off\n+# CORS filter on WS Master is turned off by default.\n+# Use environment variable \"CHE_CORS_ENABLED=true\" to turn it on\n # \"cors.allowed.origins\" indicates which request origins are allowed\n che.cors.allowed_origins=*\n # \"cors.support.credentials\" indicates if it allows processing of requests with credentials\n # (in cookies, headers, TLS client certificates)\n che.cors.allow_credentials=false\n-# This property is used to provide value for WS Agent CORS allowed origins env variable from WS Master.\n-# If set to null, then the value will be automatically provided by WS Agent.\n-che.wsagent.cors.allowed_origins=NULL\n-# This property is used to provide value for WS Agent CORS credentials origins env variable from WS Master,\n-che.wsagent.cors.allow_credentials=true\n-# This property is used to provide value for WS Agent CORS enabling.\n-che.wsagent.cors.enabled=true\n \n ## Factory defaults.\n # Editor and plugin which will be used for factories which are created from remote git repository"
        },
        {
            "sha": "6db5012de2378d0323fcd3953d530d3edac63904",
            "filename": "wsmaster/che-core-api-workspace/src/main/java/org/eclipse/che/api/workspace/server/spi/provision/env/WorkspaceAgentCorsAllowCredentialsEnvVarProvider.java",
            "status": "removed",
            "additions": 0,
            "deletions": 43,
            "changes": 43,
            "blob_url": "https://github.com/eclipse-che/che/blob/fd07eec7523196a97845b513b79d2d3aa1d6df04/wsmaster%2Fche-core-api-workspace%2Fsrc%2Fmain%2Fjava%2Forg%2Feclipse%2Fche%2Fapi%2Fworkspace%2Fserver%2Fspi%2Fprovision%2Fenv%2FWorkspaceAgentCorsAllowCredentialsEnvVarProvider.java",
            "raw_url": "https://github.com/eclipse-che/che/raw/fd07eec7523196a97845b513b79d2d3aa1d6df04/wsmaster%2Fche-core-api-workspace%2Fsrc%2Fmain%2Fjava%2Forg%2Feclipse%2Fche%2Fapi%2Fworkspace%2Fserver%2Fspi%2Fprovision%2Fenv%2FWorkspaceAgentCorsAllowCredentialsEnvVarProvider.java",
            "contents_url": "https://api.github.com/repos/eclipse-che/che/contents/wsmaster%2Fche-core-api-workspace%2Fsrc%2Fmain%2Fjava%2Forg%2Feclipse%2Fche%2Fapi%2Fworkspace%2Fserver%2Fspi%2Fprovision%2Fenv%2FWorkspaceAgentCorsAllowCredentialsEnvVarProvider.java?ref=fd07eec7523196a97845b513b79d2d3aa1d6df04",
            "patch": "@@ -1,43 +0,0 @@\n-/*\n- * Copyright (c) 2012-2018 Red Hat, Inc.\n- * This program and the accompanying materials are made\n- * available under the terms of the Eclipse Public License 2.0\n- * which is available at https://www.eclipse.org/legal/epl-2.0/\n- *\n- * SPDX-License-Identifier: EPL-2.0\n- *\n- * Contributors:\n- *   Red Hat, Inc. - initial API and implementation\n- */\n-package org.eclipse.che.api.workspace.server.spi.provision.env;\n-\n-import javax.inject.Inject;\n-import javax.inject.Named;\n-import org.eclipse.che.api.core.model.workspace.runtime.RuntimeIdentity;\n-import org.eclipse.che.api.workspace.server.spi.InfrastructureException;\n-import org.eclipse.che.commons.annotation.Nullable;\n-import org.eclipse.che.commons.lang.Pair;\n-\n-/**\n- * Add environment variable that defines support for requests with credentials for {@link\n- * CheCorsFilterConfig} of WS Agent\n- *\n- * @author Mykhailo Kuznietsov\n- */\n-public class WorkspaceAgentCorsAllowCredentialsEnvVarProvider implements LegacyEnvVarProvider {\n-\n-  private String wsAgentCorsAllowCredentials;\n-\n-  @Inject\n-  public WorkspaceAgentCorsAllowCredentialsEnvVarProvider(\n-      @Nullable @Named(\"che.wsagent.cors.allow_credentials\") String wsAgentCorsAllowCredentials) {\n-    this.wsAgentCorsAllowCredentials = wsAgentCorsAllowCredentials;\n-  }\n-\n-  @Override\n-  public Pair<String, String> get(RuntimeIdentity runtimeIdentity) throws InfrastructureException {\n-    return wsAgentCorsAllowCredentials == null\n-        ? null\n-        : Pair.of(\"CHE_WSAGENT_CORS_ALLOW__CREDENTIALS\", wsAgentCorsAllowCredentials);\n-  }\n-}"
        },
        {
            "sha": "fc8b1f9e1ba06cf28ec1346310708f705788b9d5",
            "filename": "wsmaster/che-core-api-workspace/src/main/java/org/eclipse/che/api/workspace/server/spi/provision/env/WorkspaceAgentCorsAllowedOriginsEnvVarProvider.java",
            "status": "removed",
            "additions": 0,
            "deletions": 42,
            "changes": 42,
            "blob_url": "https://github.com/eclipse-che/che/blob/fd07eec7523196a97845b513b79d2d3aa1d6df04/wsmaster%2Fche-core-api-workspace%2Fsrc%2Fmain%2Fjava%2Forg%2Feclipse%2Fche%2Fapi%2Fworkspace%2Fserver%2Fspi%2Fprovision%2Fenv%2FWorkspaceAgentCorsAllowedOriginsEnvVarProvider.java",
            "raw_url": "https://github.com/eclipse-che/che/raw/fd07eec7523196a97845b513b79d2d3aa1d6df04/wsmaster%2Fche-core-api-workspace%2Fsrc%2Fmain%2Fjava%2Forg%2Feclipse%2Fche%2Fapi%2Fworkspace%2Fserver%2Fspi%2Fprovision%2Fenv%2FWorkspaceAgentCorsAllowedOriginsEnvVarProvider.java",
            "contents_url": "https://api.github.com/repos/eclipse-che/che/contents/wsmaster%2Fche-core-api-workspace%2Fsrc%2Fmain%2Fjava%2Forg%2Feclipse%2Fche%2Fapi%2Fworkspace%2Fserver%2Fspi%2Fprovision%2Fenv%2FWorkspaceAgentCorsAllowedOriginsEnvVarProvider.java?ref=fd07eec7523196a97845b513b79d2d3aa1d6df04",
            "patch": "@@ -1,42 +0,0 @@\n-/*\n- * Copyright (c) 2012-2018 Red Hat, Inc.\n- * This program and the accompanying materials are made\n- * available under the terms of the Eclipse Public License 2.0\n- * which is available at https://www.eclipse.org/legal/epl-2.0/\n- *\n- * SPDX-License-Identifier: EPL-2.0\n- *\n- * Contributors:\n- *   Red Hat, Inc. - initial API and implementation\n- */\n-package org.eclipse.che.api.workspace.server.spi.provision.env;\n-\n-import javax.inject.Inject;\n-import javax.inject.Named;\n-import org.eclipse.che.api.core.model.workspace.runtime.RuntimeIdentity;\n-import org.eclipse.che.api.workspace.server.spi.InfrastructureException;\n-import org.eclipse.che.commons.annotation.Nullable;\n-import org.eclipse.che.commons.lang.Pair;\n-\n-/**\n- * Add environment variable that defines allowed origins for {@link CheCorsFilterConfig} of WS Agent\n- *\n- * @author Mykhailo Kuznietsov\n- */\n-public class WorkspaceAgentCorsAllowedOriginsEnvVarProvider implements LegacyEnvVarProvider {\n-\n-  private String wsAgentCorsAllowedOrigins;\n-\n-  @Inject\n-  public WorkspaceAgentCorsAllowedOriginsEnvVarProvider(\n-      @Nullable @Named(\"che.wsagent.cors.allowed_origins\") String wsAgentCorsAllowedOrigins) {\n-    this.wsAgentCorsAllowedOrigins = wsAgentCorsAllowedOrigins;\n-  }\n-\n-  @Override\n-  public Pair<String, String> get(RuntimeIdentity runtimeIdentity) throws InfrastructureException {\n-    return wsAgentCorsAllowedOrigins == null\n-        ? null\n-        : Pair.of(\"CHE_WSAGENT_CORS_ALLOWED__ORIGINS\", wsAgentCorsAllowedOrigins);\n-  }\n-}"
        },
        {
            "sha": "eda7a1404a6b981db3eb4e377c0e75105865e17c",
            "filename": "wsmaster/che-core-api-workspace/src/main/java/org/eclipse/che/api/workspace/server/spi/provision/env/WorkspaceAgentCorsEnabledEnvVarProvider.java",
            "status": "removed",
            "additions": 0,
            "deletions": 42,
            "changes": 42,
            "blob_url": "https://github.com/eclipse-che/che/blob/fd07eec7523196a97845b513b79d2d3aa1d6df04/wsmaster%2Fche-core-api-workspace%2Fsrc%2Fmain%2Fjava%2Forg%2Feclipse%2Fche%2Fapi%2Fworkspace%2Fserver%2Fspi%2Fprovision%2Fenv%2FWorkspaceAgentCorsEnabledEnvVarProvider.java",
            "raw_url": "https://github.com/eclipse-che/che/raw/fd07eec7523196a97845b513b79d2d3aa1d6df04/wsmaster%2Fche-core-api-workspace%2Fsrc%2Fmain%2Fjava%2Forg%2Feclipse%2Fche%2Fapi%2Fworkspace%2Fserver%2Fspi%2Fprovision%2Fenv%2FWorkspaceAgentCorsEnabledEnvVarProvider.java",
            "contents_url": "https://api.github.com/repos/eclipse-che/che/contents/wsmaster%2Fche-core-api-workspace%2Fsrc%2Fmain%2Fjava%2Forg%2Feclipse%2Fche%2Fapi%2Fworkspace%2Fserver%2Fspi%2Fprovision%2Fenv%2FWorkspaceAgentCorsEnabledEnvVarProvider.java?ref=fd07eec7523196a97845b513b79d2d3aa1d6df04",
            "patch": "@@ -1,42 +0,0 @@\n-/*\n- * Copyright (c) 2012-2018 Red Hat, Inc.\n- * This program and the accompanying materials are made\n- * available under the terms of the Eclipse Public License 2.0\n- * which is available at https://www.eclipse.org/legal/epl-2.0/\n- *\n- * SPDX-License-Identifier: EPL-2.0\n- *\n- * Contributors:\n- *   Red Hat, Inc. - initial API and implementation\n- */\n-package org.eclipse.che.api.workspace.server.spi.provision.env;\n-\n-import javax.inject.Inject;\n-import javax.inject.Named;\n-import org.eclipse.che.api.core.model.workspace.runtime.RuntimeIdentity;\n-import org.eclipse.che.api.workspace.server.spi.InfrastructureException;\n-import org.eclipse.che.commons.annotation.Nullable;\n-import org.eclipse.che.commons.lang.Pair;\n-\n-/**\n- * Add environment variable that enables CORS filter on WS Agent\n- *\n- * @author Mykhailo Kuznietsov\n- */\n-public class WorkspaceAgentCorsEnabledEnvVarProvider implements LegacyEnvVarProvider {\n-\n-  private String wsAgentCorsEnabled;\n-\n-  @Inject\n-  public WorkspaceAgentCorsEnabledEnvVarProvider(\n-      @Nullable @Named(\"che.wsagent.cors.enabled\") String wsAgentCorsEnabled) {\n-    this.wsAgentCorsEnabled = wsAgentCorsEnabled;\n-  }\n-\n-  @Override\n-  public Pair<String, String> get(RuntimeIdentity runtimeIdentity) throws InfrastructureException {\n-    return wsAgentCorsEnabled == null\n-        ? null\n-        : Pair.of(\"CHE_WSAGENT_CORS_ENABLED\", wsAgentCorsEnabled);\n-  }\n-}"
        }
    ]
}